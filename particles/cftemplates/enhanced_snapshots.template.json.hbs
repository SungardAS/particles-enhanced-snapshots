{{#layout}}

  {{parameter "key_name" logicalId="KeyName"}}

  {{parameter "image_id" "base" logicalId="ImageId"}}

  {{parameter "instance_type" logicalId="InstanceType"}}

  {{parameter "vpc_id" logicalId="VpcId"}}

  {{parameter "name_tag" logicalId="NameTag"}}

  {{resource 'user' logicalId="User"}}

  {{resource 'access_key' logicalId="AccessKey"}}

  {{
    resource 'security_group'
    logicalId="SecurityGroup"
    nameTagLogicalId="NameTag"
  }}


  {{
    resource 'instance' logicalId="Instance"
    nameTagLogicalId="NameTag"
    imageIdLogicalId="ImageId"
    keyNameLogicalId="KeyName"
    instanceTypeLogicalId="InstanceType"
    accessKeyLogicalId="AccessKey"
    securityGroupLogicalId="SecurityGroup"
  }}

{{/layout}}
